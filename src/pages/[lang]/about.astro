---
import Layout from "../../components/Layout.astro";
import { isValidLocale, getTranslations, DEFAULT_LOCALE, ALL_LOCALES } from "../../i18n/config";

export async function getStaticPaths() {
    return ALL_LOCALES.filter(locale => locale !== DEFAULT_LOCALE).map(lang => ({
        params: { lang }
    }));
}

const { lang } = Astro.params;

if (!lang || !isValidLocale(lang)) {
    return Astro.redirect(`/${DEFAULT_LOCALE}/about/`);
}

const locale = lang;
const translations = getTranslations(locale);

// ページ固有の翻訳
const pageContent = {
    en: {
        title: "About This Site",
        description: "Learn more about this multilingual Astro website.",
        detailsTitle: "Detailed Information",
        detailsContent: "This is a multilingual site created using Astro. It supports Japanese, English, and Arabic languages.",
        techSpecsTitle: "Technical Specifications",
        featuresTitle: "Features",
        techSpecs: [
            "Framework: Astro",
            "Language: TypeScript", 
            "Internationalization: Custom i18n solution",
            "Supported Languages: Japanese (default), English, Arabic"
        ],
        features: [
            "Static Site Generation (SSG)",
            "SEO Optimized",
            "RTL (Right-to-Left) language support",
            "Responsive Design"
        ],
        backHome: "← Back to Home",
        toContact: "Contact Us →"
    },
    ar: {
        title: "حول هذا الموقع",
        description: "تعرف أكثر على هذا الموقع متعدد اللغات المبني بـ Astro.",
        detailsTitle: "معلومات مفصلة",
        detailsContent: "هذا موقع متعدد اللغات تم إنشاؤه باستخدام Astro. يدعم اللغات اليابانية والإنجليزية والعربية.",
        techSpecsTitle: "المواصفات التقنية",
        featuresTitle: "الميزات",
        techSpecs: [
            "إطار العمل: Astro",
            "اللغة: TypeScript",
            "التدويل: حل i18n مخصص",
            "اللغات المدعومة: اليابانية (افتراضي)، الإنجليزية، العربية"
        ],
        features: [
            "توليد المواقع الثابتة (SSG)",
            "محسن لمحركات البحث",
            "دعم اللغات من اليمين إلى اليسار (RTL)",
            "تصميم متجاوب"
        ],
        backHome: "← العودة للرئيسية",
        toContact: "اتصل بنا ←"
    },
    ja: {
        title: "このサイトについて",
        description: "このAstro多言語サイトについて詳しく学びましょう。",
        detailsTitle: "詳細情報",
        detailsContent: "これはAstroを使用して作成された多言語サイトです。日本語、英語、アラビア語に対応しています。",
        techSpecsTitle: "技術仕様",
        featuresTitle: "特徴",
        techSpecs: [
            "フレームワーク: Astro",
            "言語: TypeScript",
            "国際化: カスタムi18nソリューション",
            "対応言語: 日本語（デフォルト）、英語、アラビア語"
        ],
        features: [
            "静的サイト生成 (SSG)",
            "SEO最適化",
            "RTL（右から左）言語対応",
            "レスポンシブデザイン"
        ],
        backHome: "← ホームに戻る",
        toContact: "お問い合わせ →"
    }
};

const content = pageContent[locale];
---

<Layout 
    locale={locale} 
    translations={translations}
    title={`${content.title} | ${translations.hello}`}
    description={content.description}
    currentPath="about"
>
    <h1>{content.title}</h1>
    <p>{translations.aboutContent}</p>
    
    <section>
        <h2>{content.detailsTitle}</h2>
        <p>{content.detailsContent}</p>
        
        <h3>{content.techSpecsTitle}</h3>
        <ul>
            {content.techSpecs.map(spec => <li>{spec}</li>)}
        </ul>
        
        <h3>{content.featuresTitle}</h3>
        <ul>
            {content.features.map(feature => <li>{feature}</li>)}
        </ul>
    </section>
    
    <nav style="margin-top: 2rem;">
        <a href={`/${locale === 'ja' ? '' : locale + '/'}`} style="margin-right: 1rem;">{content.backHome}</a>
        <a href={`/${locale}/contact/`}>{content.toContact}</a>
    </nav>
</Layout>