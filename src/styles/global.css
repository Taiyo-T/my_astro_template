@tailwind base;
@tailwind components;
@tailwind utilities;

/* 究極の白フラッシュ防止 */
@layer base {
  /* 最優先でダークモードカラーを設定 */
  :root {
    color-scheme: dark;
  }
  
  html {
    font-family: system-ui, sans-serif;
    /* デフォルトでダークモード背景設定 */
    background-color: #111827;
    color: #f9fafb;
    /* 全てのトランジションを初期無効化 */
    * {
      transition: none !important;
      animation: none !important;
    }
  }
  
  /* ライトモード時の上書き */
  html:not(.dark) {
    background-color: #f9fafb;
    color: #111827;
    color-scheme: light;
  }
  
  body {
    @apply min-h-screen flex flex-col;
    background-color: inherit;
    color: inherit;
  }
  
  /* ページ読み込み完了後にトランジションを再有効化 */
  html.transitions-enabled * {
    transition: unset !important;
    animation: unset !important;
  }
  
  /* RTL言語サポート */
  [dir="rtl"] {
    text-align: right;
  }
}

@layer components {
  /* ボタンコンポーネント */
  .btn {
    @apply px-4 py-2 rounded-md font-medium transition-colors duration-200;
  }
  
  .btn-primary {
    @apply bg-blue-600 dark:bg-blue-500 text-white hover:bg-blue-700 dark:hover:bg-blue-600 focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 dark:focus:ring-offset-gray-800;
  }
  
  .btn-secondary {
    @apply bg-gray-200 dark:bg-gray-700 text-gray-900 dark:text-gray-100 hover:bg-gray-300 dark:hover:bg-gray-600 focus:ring-2 focus:ring-gray-500 focus:ring-offset-2 dark:focus:ring-offset-gray-800;
  }
  
  /* フォームコンポーネント */
  .form-input {
    @apply w-full px-3 py-2 border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:focus:border-blue-400 transition-colors;
  }
  
  .form-label {
    @apply block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2;
  }
  
  /* カードコンポーネント */
  .card {
    @apply bg-white dark:bg-gray-800 rounded-lg shadow-md border border-gray-200 dark:border-gray-700 overflow-hidden transition-colors;
  }
  
  .card-body {
    @apply p-6;
  }
  
  /* ナビゲーションリンク */
  .nav-link {
    @apply text-gray-600 dark:text-gray-400 hover:text-blue-600 dark:hover:text-blue-400 transition-colors duration-200;
  }
  
  .nav-link.active {
    @apply text-blue-600 dark:text-blue-400 font-medium;
  }
}

@layer utilities {
  /* RTL対応のユーティリティ */
  .rtl\:text-right[dir="rtl"] {
    text-align: right;
  }
  
  .rtl\:flex-row-reverse[dir="rtl"] {
    flex-direction: row-reverse;
  }
}